<!DOCTYPE html>
<html>

<head>
   <title>Shopping Cart</title>
   <!-- <img src=""/> -->
   <link rel="shortcut icon" href="https://img.icons8.com/plasticine/100/000000/mobile-order.png" type="image/x-icon">
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet" />
   <link href="practiceCss.css" rel="stylesheet">
</head>

<body>

   <section id="first">
      <div class="container">
         <div class="cart">
            <div class="col-md-12 col-lg-10 mx-auto">
               <div id="mobile" class="cart-item">
                  <div class="row">
                     <div class="col-md-6 center-item">
                        <img src="images/product-1.png" alt="">
                        <h6>iPhone 11 128GB Black</h6>
                     </div>

                     <div class="col-md-6 center-item">    
                        <div class="input-group -spinner">
                           <button id="minus1" class="btn btn-default"><i class="fas fa-minus"></i></button>
                           <input id="number1" oninput="mobileUpdate()" type="text" class="form-control text-center" value="1">
                           <button id="plus1" class="btn btn-default"><i class="fas fa-plus"></i></button>
                        </div>
                        <h5>$<span id="cost1">1,219</span></h5>
                        <img id="cross1" src="images/remove.png"class="remove-item">
                     </div>
                  </div>
               </div>

               <div id="case" class="cart-item">
                  <div class="row">
                     <div class="col-md-6 center-item mx-auto">
                        <img src="images/product-2.png" alt="">
                        <h6>iPhone 11 Silicone Case - Black</h6>
                     </div>
                     <div class="col-md-6 center-item">
                        <div class="input-group -spinner">
                           <button id="minus2" class="btn btn-default"><i class="fas fa-minus"></i></button>
                           <input id="number2" oninput="caseUpdate()" type="text" class="form-control text-center" value="1">
                           <button id="plus2" class="btn btn-default"><i class="fas fa-plus"></i></button>

                        </div>
                        <h5>$<span id="cost2">59</span></h5>
                        <img id="cross2" src="images/remove.png"class="remove-item">
                     </div>
                  </div>
               </div>
               <div class="cart-item">
                  <div class="row">
                     <div class="col-md-6 col-12 col"><h5>Do you have a coupon? Get 15% discount!</h5></div>
                     <div class="col-md-6 col-12 col row">
                        <div class="col col-md-9 col-sm-9 col-9">
                           <input id="coupon" class="form-control text-center" placeholder="Coupon: we-are-p-hero" value="we-are-p-hero">
                        </div>
                        <div class="col col-md-3 col-sm-3 col-3">
                           <button type="button" onclick="savingApply()" class="btn btn-warning" title="Are you sure to save your money...?">APPLY</button>
                        </div>
                     </div>
                  </div>
               </div>

               <div class="cart-item">
                  <div class="d-flex bd-highlight">

                     <div class="mr-auto p-2 bd-highlight">
                        <h5>Subtotal: </h5>
                        <h5>Tax:</h5>
                        <h5 id="apply1">Saving:</h5>
                        <h5>Total:</h5>
                     </div>

                     <div class="p-2 bd-highlight status">
                        <h5>$<span id="sub-total">1,278</span></h5>
                        <h5>$<span id="tax">2</span></h5>
                        <h5 id="apply2">$0</span></h5>
                        <h5>$<span id="total">1,280</span></h5>
                     </div>
                  </div>
               </div>
               <div class="d-flex bd-highlight mb-3">
                    <div class="pt-4 pb-4 mr-auto p-2 bd-highlight">
                        <button type="button" onclick="resetAll()" class="btn btn-primary" title="Are you sure to reset everything...???">Re-setting</button>
                    </div>
                    <div class="pt-4 pb-4 p-2 bd-highlight">
                        <button type="button" onclick="checkAll()" class="btn btn-success check-out" title="Are you sure to check it out...???">Check Out</button>
                    </div>
               </div>
            </div>
         </div>
      </div>
   </section>
   <section id="other-page">
      <div id="second" class="container memo text-center">
         <h1>Thank You!!!</h1>
         <h3>Your order has been confirmed.</h3>
         <br>
         <h4>Order id: m2ah<span id="order-id">458470</span>ad3e@</h4>
         <h6>Per Mobile: $1,219</h6>
         <h6>Per Mobile Case: $59</h6>
         <h6>Number of Mobile: <span id="m1">1</span></h6>
         <h6>Number of Case: <span id="m2">1</span></h6>
         <h6>Subtotal: $<span id="m3">1,278</span></h6>
         <h6>Tax: $<span id="m4">2</span></h6>
         <h6>Saving: $<span id="m5">0</span></h6>
         <h3>Total: $<span id="m6">1,088</span></h3>
         <!-- kaj korte hobe id="m5" id="m6"... -->
      </div>
      <div id="third" class="container">
         <div class="back text-center">
            <button onclick="back()" type="button" class="btn btn-success" style="width: 400px !important"><small style="color: white">BACK</small></button>
      </div>
      </div>
   </section>
   
   <script>
       const mobileNumber = document.getElementById('number1');//.value
       const caseNumber = document.getElementById('number2');//.value
       const mobileCost = document.getElementById('cost1');//.innerHTML
       const caseCost = document.getElementById('cost2');//.innerText
       const subTotal = document.getElementById('sub-total');//.innerText
       const tax = document.getElementById('tax');//.innerText
       const total = document.getElementById('total');//.innerHTML
       const Mobile = document.getElementById('mobile');//style.display = 'block' / 'none'
       const Case = document.getElementById('case');//style.display = 'block' / 'none'
       const saving = document.getElementById('apply2');//.innerText
       let ck = true;
       let apply = false;
       let s = 0.15;
       let TT = 0;
       
       //Apply Button...Coupon...Saving-->Handler...
       function savingApply(){
          if(document.getElementById('coupon').value != "we-are-p-hero"){
             alert("Invalid coupon, please use this coupon: we-are-p-hero");
          }else{
             apply = true;
             TT = parseFloat(total.innerHTML.replace(/[^0-9]/g, ""));
             saving.innerHTML = "$" + Math.round(TT*0.15).toLocaleString('en-IN');
             TT -= Math.round(TT*0.15);
             total.innerHTML = TT.toLocaleString('en-IN');
             document.getElementById('apply1').style.display = 'block';
             document.getElementById('apply2').style.display = 'block';
            //  document.getElementById('saving').style.display = 'block';
          }
       }
       // Back...
        function back(){
            apply = false;
            document.getElementById('apply1').style.display = 'none';
            document.getElementById('apply2').style.display = 'none';
            document.getElementById('other-page').style.display = 'none';
            document.getElementById("second").style.display = "none";
            document.getElementById("third").style.display = "none";
            document.getElementById("first").style.display = "block";
        }
       //Re-setting...all value...
       function resetAll(){
           apply = false;
           mobileNumber.value = parseInt("1").toLocaleString('en-IN');
           caseNumber.value = parseInt('1').toLocaleString('en-IN');
           mobileCost.innerHTML = parseInt('1219').toLocaleString('en-IN');
           caseCost.innerHTML = parseInt('59').toLocaleString('en-IN');
           subTotal.innerText = parseInt('1278').toLocaleString('en-IN');
           tax.innerText = parseInt('2').toLocaleString('en-IN');
           total.innerHTML = parseInt("1280").toLocaleString('en-IN');
           Mobile.style.display = 'block';
           Case.style.display = 'block';
           document.getElementById('apply1').style.display = 'none';
           document.getElementById('apply2').style.display = 'none';
       }
       //check-out...
       function checkAll(){
            if(parseInt(document.getElementById('number1').value)>-1 == false || parseInt(document.getElementById('number2').value)>-1 == false){
                alert("please enter your valid number of mobile && case ");
                resetAll();
            }else{
                let M = parseInt(mobileNumber.value.replace(/[^0-9]/g, ''));
                let C = parseInt(caseNumber.value.replace(/[^0-9]/g, ''));
                let Sub_Total = parseInt(subTotal.innerText.replace(/[^0-9]/g, ''));
                let Tax = parseInt(tax.innerText.replace(/[^0-9]/g, ''));
                let Total = parseInt(total.innerText.replace(/[^0-9]/g, ''));
               //  console.log({Total});
               //  console.log(M,C,Sub_Total,Tax,Total);
                document.getElementById('m1').innerText = M.toLocaleString('en-IN');
                document.getElementById('m2').innerText = C.toLocaleString('en-IN');
                document.getElementById('m3').innerText = Sub_Total.toLocaleString('en-IN');
                document.getElementById('m4').innerText = Tax.toLocaleString('en-IN');
               //  console.log({apply});
                if(apply){
                  document.getElementById('m5').innerText = Math.round(parseFloat(saving.innerHTML.replace(/[^0-9]/g, ""))).toLocaleString('en-IN');
                }else{
                   document.getElementById('m5').innerHTML = "0";
                }
                document.getElementById('m6').innerText = Total.toLocaleString('en-IN');
                resetAll();
                document.getElementById('first').style.display = 'none';
                document.getElementById('other-page').style.display = 'block';
                document.getElementById('second').style.display = 'block';
                document.getElementById('third').style.display = 'block';
            }
       }
       //cross1...
       const crossMobile = document.getElementById('cross1');
       crossMobile.addEventListener('click', function(){
        //checkAll();
            updateInput(0,parseInt(caseNumber.value.replace(/[^0-9]/g, '')),false);
            // console.log("mobile",parseInt(mobileNumber.value.replace(/[^0-9]/g, '')));  
            // console.log("case",parseInt(caseNumber.value.replace(/[^0-9]/g, '')));
            Mobile.style.display = 'none';
       });
       //cross2...
       const crossCase = document.getElementById('cross2');
       crossCase.addEventListener('click', function(){
            //checkAll();
            updateInput(parseInt(mobileNumber.value.replace(/[^0-9]/g, '')),0,false);  
            // console.log("case",parseInt(caseNumber.value.replace(/[^0-9]/g, '')));
            // console.log("mobile",parseInt(mobileNumber.value.replace(/[^0-9]/g, '')));  
            Case.style.display = 'none';
       });
       //minus1...button...
       const minMobile = document.getElementById('minus1');
       minMobile.addEventListener('click', function(){
           let mN = new Number(parseInt(mobileNumber.value.replace(/[^0-9]/g, '')));
           let cN = new Number(parseInt(caseNumber.value.replace(/[^0-9]/g, '')));
           ck = false;
           updateInput(mN-1,cN,ck);
        });
        //minus2...button...
       const minCase = document.getElementById('minus2');
       minCase.addEventListener('click', function(){
            let mN = new Number(parseInt(mobileNumber.value.replace(/[^0-9]/g, '')));
            let cN = new Number(parseInt(caseNumber.value.replace(/[^0-9]/g, '')));
            ck = false;
            updateInput(mN,cN-1,ck);
       });
       //plus1...button...
       const addMobile = document.getElementById('plus1');
       addMobile.addEventListener('click', function(){
            let mN = new Number(parseInt(mobileNumber.value.replace(/[^0-9]/g, '')));
            let cN = new Number(parseInt(caseNumber.value.replace(/[^0-9]/g, '')));
            ck=true;
            updateInput(mN+1,cN,ck);
       });

       //plus2...button...
       const addCase = document.getElementById('plus2');
       addCase.addEventListener('click', function(){
            let mN = new Number(parseInt(mobileNumber.value.replace(/[^0-9]/g, '')));
            let cN = new Number(parseInt(caseNumber.value.replace(/[^0-9]/g, '')));
            ck=true;
            updateInput(mN,cN+1,ck);
       });

       function mobileUpdate(){
        //    let cC = new Number(parseInt(caseCost.innerText.replace(/[^0-9]/g, ''))).toLocaleString('en-IN');
        //    let sT = new Number(parseInt(subTotal.innerText.replace(/[^0-9]/g, ''))).toLocaleString('en-IN');
        //    let tx = new Number(parseInt(tax.innerText.replace(/[^0-9]/g, ''))).toLocaleString('en-IN');
        //    let tT = new Number(parseInt(total.innerText.replace(/[^0-9]/g, ''))).toLocaleString('en-IN');
           let mN = new Number(parseInt(mobileNumber.value.replace(/[^0-9]/g, '')));
           let cN = new Number(parseInt(caseNumber.value.replace(/[^0-9]/g, '')));
           ck=true;
           updateInput(mN,cN,ck);
           
        //    console.log(mN,mC,cN,cC,sT,tx,tT);
       }
       function caseUpdate(){
            let mN = new Number(parseInt(mobileNumber.value.replace(/[^0-9]/g, '')));
            let cN = new Number(parseInt(caseNumber.value.replace(/[^0-9]/g, '')));
            updateInput(mN,cN,ck);
       }
       function updateInput(mN, cN, ck){
            // console.log(mN);
            if(ck==false && mN==0){
                mobileNumber.value = mN.toLocaleString('en-IN');
            }
            if(ck==false && cN==0){
                caseNumber.value = cN.toLocaleString('en-IN');
            }
            if(mobileNumber.value==''){
                mobileNumber.value = '';
                mN = 0;
            }
            if(caseNumber.value==''){
                caseNumber.value = '';
                cN = 0;
            }
            if(mN>-1 == false){
                alert('Please enter your valid quantity!!!');
                mobileNumber.value = "";
                mN=0;
            }
            if(cN>-1 == false){
                alert('Please enter your valid quantity!!!');
                caseNumber.value = "";
                cN=0;
            }
            if(mN!=0){
                mobileNumber.value = mN.toLocaleString('en-IN');
            }
            if(cN!=0){
                caseNumber.value = cN.toLocaleString('en-IN');
            }
            mobileCost.innerHTML = (mN*1219).toLocaleString('en-IN');
            caseCost.innerHTML = (cN*59).toLocaleString('en-IN');
            //let mC = new Number(parseInt(mobileCost.innerHTML.replace(/[^0-9]/g, '')));
            subTotal.innerHTML = ((mN*1219)+(cN*59)).toLocaleString('en-IN');
            tax.innerHTML = (cN+mN).toLocaleString('en-IN');
            total.innerHTML = ((mN*1219)+(cN*59)+(cN+mN)).toLocaleString('en-IN');
            if(apply){
               TT = parseFloat(total.innerHTML.replace(/[^0-9]/g, ""));
               saving.innerHTML = "$" + Math.round(TT*0.15).toLocaleString('en-IN');
               TT -= Math.round(TT*0.15);
               total.innerHTML = TT.toLocaleString('en-IN');
            }
       }
   </script>
</body>

</html>